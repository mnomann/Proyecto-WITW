<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Página de Actividades</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <!-- Leaflet CSS for maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100">

  <!-- Barra de navegacion -->
  <nav class="bg-white shadow fixed w-full top-0 left-0 z-50">
    <div class="max-w-7xl mx-auto px-4 flex justify-between items-center h-16">
      <div class="text-xl font-bold text-gray-700">WITW</div>

      <!-- Botones de navegacion -->
      <div class="hidden md:flex space-x-6">
        <button class="nav-btn text-gray-600 hover:text-gray-900" data-section="inicio">Inicio</button>
        <button class="nav-btn text-gray-600 hover:text-gray-900" data-section="add">Añadir actividad</button>
        <button class="nav-btn text-gray-600 hover:text-gray-900" data-section="mapa">Mapa</button>
        <a href="login.html" class="text-gray-600 hover:text-gray-900">Iniciar sesión</a>
        <a href="register.html" class="text-gray-600 hover:text-gray-900">Registrarse</a>
      </div>

      <!-- Menu de perfil -->
      <div class="relative">
        <button id="profileBtn" class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center">
          <svg class="w-6 h-6 text-gray-700" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/>
          </svg>
        </button>
        <div id="profileMenu" class="hidden absolute right-0 mt-2 w-48 bg-white border rounded shadow-md">
          <button class="w-full text-left px-4 py-2 hover:bg-gray-100 nav-btn" data-section="perfil">Perfil</button>
          <a href="login.html" class="block px-4 py-2 hover:bg-gray-100">Salir</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sección de Inicio (Dashboard de Actividades) -->
  <main id="inicio" class="section pt-24 max-w-5xl mx-auto px-4">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Dashboard de Actividades</h1>
    <div id="contenedor-actividades" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    </div>
  </main>

  <!-- Sección de Perfil -->
  <section id="perfil" class="section hidden pt-24 max-w-md mx-auto px-4">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Editar Perfil</h1>
    <form id="profileForm" class="bg-white p-6 rounded-lg shadow-md space-y-4">
      <div class="flex items-center space-x-4">
        <div>
          <label class="block text-gray-700">Foto de perfil</label>
          <div class="w-24 h-24 bg-gray-200 rounded-full overflow-hidden flex items-center justify-center">
            <img id="avatarPreview" src="https://placehold.co/100x100/EFEFEF/31343C?text=Perfil" alt="avatar" class="w-full h-full object-cover">
          </div>
        </div>
        <div class="flex-1">
          <label for="avatarInput" class="btn-secundario cursor-pointer">
             <span>Seleccionar archivo</span>
          </label>
          <input id="avatarInput" type="file" accept="image/*" class="hidden" />
          <span id="avatarFileName" class="ml-3 text-sm text-gray-600">Ningún archivo.</span>
        </div>
      </div>
      <div>
        <label class="block text-gray-700">Nombre</label>
        <input id="profileName" type="text" class="w-full border rounded p-2" placeholder="Tu nombre">
      </div>
      <button type="submit" class="btn-primario w-full">Guardar cambios</button>
      <div id="profileMsg" class="text-sm mt-2 text-center"></div>
    </form>
  </section>

  <!-- Sección para Añadir Actividad -->
  <section id="add" class="section hidden pt-24 max-w-md mx-auto px-4">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Añadir Nueva Actividad</h1>
    <form id="form-add" class="bg-white p-6 rounded-lg shadow-md space-y-4">
      <div>
        <label for="nombre" class="block text-gray-700">Nombre de la actividad</label>
        <input name="nombre" type="text" class="w-full border rounded p-2" required>
      </div>
      <div>
        <label for="lugar" class="block text-gray-700">Lugar</label>
        <input name="lugar" type="text" class="w-full border rounded p-2" required>
      </div>
      <div class="flex space-x-4">
        <div class="flex-1">
          <label for="fecha" class="block text-gray-700">Fecha</label>
          <input name="fecha" type="date" class="w-full border rounded p-2" required>
        </div>
        <div class="flex-1">
          <label for="hora" class="block text-gray-700">Hora</label>
          <input name="hora" type="time" class="w-full border rounded p-2" required>
        </div>
      </div>
      <div>
        <label for="descripcion" class="block text-gray-700">Descripción</label>
        <textarea name="descripcion" class="w-full border rounded p-2" rows="3" required></textarea>
      </div>
      <div>
        <label for="imagenUrl" class="block text-gray-700">URL de la Imagen</label>
        <input name="imagenUrl" type="url" class="w-full border rounded p-2" placeholder="https://..." required>
      </div>
      <div>
        <label for="capacidadMaxima" class="block text-gray-700">Capacidad Máxima de Asistentes</label>
        <input name="capacidadMaxima" type="number" class="w-full border rounded p-2" placeholder="10" min="1" required>
      </div>
      <button type="submit" class="btn-primario w-full">Agregar Actividad</button>
    </form>
  </section>

  <!-- Sección de Mapa -->
  <section id="mapa" class="section hidden pt-24 px-4 max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Mapa de Eventos</h1>
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <aside class="bg-white p-6 rounded-lg shadow-md space-y-4 self-start">
        <h3 class="font-semibold text-lg">Buscar y filtrar</h3>
        <label class="block">
          <span class="text-gray-700">Tipo de Actividad</span>
          <select id="tipo-mapa" class="w-full border rounded p-2 mt-1">
            <option value="">Todos</option>
            <option>Concierto</option>
            <option>Feria</option>
            <option>Taller</option>
            <option>Deporte</option>
          </select>
        </label>
        <label class="block">
          <span class="text-gray-700">Fecha</span>
          <input type="date" id="fecha-mapa" class="w-full border rounded p-2 mt-1" />
        </label>
        <button class="btn-primario w-full">Aplicar Filtros</button>
      </aside>
      <div id="map-container" class="lg:col-span-2 rounded-lg shadow-md overflow-hidden h-[600px]">
         <!-- El mapa de Leaflet se cargará aquí -->
      </div>
    </div>
  </section>

  <!-- Leaflet JS for maps -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  
  <!-- Apuntamos al nuevo archivo 'logic.js' -->
  <script src="logic.js"></script>
</body>
</html>

